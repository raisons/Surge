# Surge çš„è§„åˆ™é…ç½®æ‰‹å†Œ: https://manual.nssurge.com/
# Thanks @Hackl0us SS-Rule-Snippet

[General]
loglevel = notify
# ä» Surge iOS 4 / Surge Mac 3.3.0 èµ·ï¼Œå·¥å…·å¼€å§‹æ”¯æŒ DoH
doh-server = https://doh.pub/dns-query
# https://dns.alidns.com/dns-query, https://13800000000.rubyfish.cn/, https://dns.google/dns-query
dns-server = 223.5.5.5, 114.114.114.114
# tun-excluded-routes = 0.0.0.0/8, 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.168.0.0/16, 192.88.99.0/24, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32
skip-proxy = localhost, *.local, injections.adguard.org, local.adguard.org, captive.apple.com, guzzoni.apple.com, 0.0.0.0/8, 10.0.0.0/8, 17.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.168.0.0/16, 192.88.99.0/24, 198.18.0.0/15, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 240.0.0.0/4, 255.255.255.255/32

wifi-assist = true
allow-wifi-access = true
wifi-access-http-port = 6152
wifi-access-socks5-port = 6153
http-listen = 0.0.0.0:6152
socks5-listen = 0.0.0.0:6153
allow-hotspot-access = true

external-controller-access = surgepasswd@0.0.0.0:6170
replica = false

tls-provider = openssl
network-framework = false
exclude-simple-hostnames = true
ipv6 = true

test-timeout = 4
proxy-test-url = http://www.gstatic.com/generate_204
geoip-maxmind-url = https://unpkg.zhimg.com/rulestatic@1.0.1/Country.mmdb

[Replica]
hide-apple-request = true
hide-crashlytics-request = true
use-keyword-filter = false
hide-udp = false

# -----------------------------
# Surge çš„å‡ ç§ç­–ç•¥é…ç½®è§„èŒƒï¼Œè¯·å‚è€ƒ https://manual.nssurge.com/policy/proxy.html
# ä¸åŒçš„ä»£ç†ç­–ç•¥æœ‰*å¾ˆå¤š*å¯é€‰å‚æ•°ï¼Œè¯·å‚è€ƒä¸Šæ–¹è¿æ¥çš„ Parameters ä¸€æ®µï¼Œæ ¹æ®éœ€æ±‚è‡ªè¡Œæ·»åŠ å‚æ•°ã€‚
#
# Surge ç°å·²æ”¯æŒ UDP è½¬å‘åŠŸèƒ½ï¼Œè¯·å‚è€ƒ: https://trello.com/c/ugOMxD3u/53-udp-%E8%BD%AC%E5%8F%91
# Surge ç°å·²æ”¯æŒ TCP-Fast-Open æŠ€æœ¯ï¼Œè¯·å‚è€ƒ: https://trello.com/c/ij65BU6Q/48-tcp-fast-open-troubleshooting-guide
# Surge ç°å·²æ”¯æŒ ss-libev çš„å…¨éƒ¨åŠ å¯†æ–¹å¼å’Œæ··æ·†ï¼Œè¯·å‚è€ƒ: https://trello.com/c/BTr0vG1O/47-ss-libev-%E7%9A%84%E6%94%AF%E6%8C%81%E6%83%85%E5%86%B5
# -----------------------------

[Proxy]
DIRECT = direct

[Proxy Group]
âœˆï¸ é€‰æ‹©æœºåœº = select, ğŸ–¥ï¸ é£æ•°èŠ‚ç‚¹, ğŸ–¥ï¸ ä¸€å…ƒèŠ‚ç‚¹
ğŸ–¥ï¸ é£æ•°èŠ‚ç‚¹ = select, policy-path=é£æ•°.conf
ğŸ–¥ï¸ ä¸€å…ƒèŠ‚ç‚¹ = select, policy-path=ä¸€å…ƒæœºåœº.conf
ğŸ’¬ ChatGPT = select, ğŸ‡ºğŸ‡¸ ç¾å›½, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, ğŸ‡­ğŸ‡° é¦™æ¸¯, ğŸ–¥ï¸ ä¸€å…ƒèŠ‚ç‚¹, ğŸ–¥ï¸ é£æ•°èŠ‚ç‚¹
âœ‰ï¸ Telegram = select, ğŸ–¥ï¸ ä¸€å…ƒèŠ‚ç‚¹, ğŸ–¥ï¸ é£æ•°èŠ‚ç‚¹
ğŸŸ æ¼ç½‘ä¹‹é±¼ = select, DIRECT
ğŸ‡ºğŸ‡¸ ç¾å›½ = url-test, include-other-group="ğŸ–¥ï¸ é£æ•°èŠ‚ç‚¹", policy-regex-filter=ç¾å›½, interval=600, tolerance=100, evaluate-before-use=true, hidden=true
ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ = url-test, include-other-group="ğŸ–¥ï¸ é£æ•°èŠ‚ç‚¹", policy-regex-filter=æ–°åŠ å¡, interval=600, tolerance=100, evaluate-before-use=true, hidden=true
ğŸ‡­ğŸ‡° é¦™æ¸¯ = url-test, include-other-group="ğŸ–¥ï¸ é£æ•°èŠ‚ç‚¹", policy-regex-filter=é¦™æ¸¯, interval=600, tolerance=100, evaluate-before-use=true, hidden=true

[Rule]
# è‡ªå®šä¹‰è§„åˆ™
## æ‚¨å¯ä»¥åœ¨æ­¤å¤„æ’å…¥è‡ªå®šä¹‰è§„åˆ™

# å¼ºåˆ¶è®¢é˜…åŸŸåç›´è¿
DOMAIN,flyint.win,DIRECT

# Apple
DOMAIN-SUFFIX,ls.apple.com,DIRECT // Apple Maps
DOMAIN-SUFFIX,store.apple.com,DIRECT // Apple Store Online
RULE-SET,https://raisons.github.io/surge/rules/apple.list,âœˆï¸ é€‰æ‹©æœºåœº
RULE-SET,https://raisons.github.io/surge/rules/apple-direct.list,DIRECT

# chatgpt
RULE-SET,https://raisons.github.io/surge/rules/chatgpt.list,ğŸ’¬ ChatGPT

# å›½å†…
RULE-SET,https://raisons.github.io/surge/rules/cn.list,DIRECT

# Telegram
RULE-SET,https://raisons.github.io/surge/rules/telegram.list,âœ‰ï¸ Telegram

# å¹¿å‘Š
RULE-SET,https://raisons.github.io/surge/rules/adblock.list,REJECT

# å›½å¤–ç½‘ç«™
RULE-SET,https://raisons.github.io/surge/rules/proxy.list,âœˆï¸ é€‰æ‹©æœºåœº


## æŠ— DNS æ±¡æŸ“
DOMAIN-KEYWORD,flyint,âœˆï¸ é€‰æ‹©æœºåœº
DOMAIN-KEYWORD,amazon,âœˆï¸ é€‰æ‹©æœºåœº
DOMAIN-KEYWORD,google,âœˆï¸ é€‰æ‹©æœºåœº
DOMAIN-KEYWORD,gmail,âœˆï¸ é€‰æ‹©æœºåœº
DOMAIN-KEYWORD,youtube,âœˆï¸ é€‰æ‹©æœºåœº
DOMAIN-KEYWORD,facebook,âœˆï¸ é€‰æ‹©æœºåœº
DOMAIN-SUFFIX,fb.me,âœˆï¸ é€‰æ‹©æœºåœº
DOMAIN-SUFFIX,fbcdn.net,âœˆï¸ é€‰æ‹©æœºåœº
DOMAIN-KEYWORD,twitter,âœˆï¸ é€‰æ‹©æœºåœº
DOMAIN-KEYWORD,instagram,âœˆï¸ é€‰æ‹©æœºåœº
DOMAIN-KEYWORD,dropbox,âœˆï¸ é€‰æ‹©æœºåœº
DOMAIN-SUFFIX,twimg.com,âœˆï¸ é€‰æ‹©æœºåœº
DOMAIN-KEYWORD,blogspot,âœˆï¸ é€‰æ‹©æœºåœº
DOMAIN-SUFFIX,youtu.be,âœˆï¸ é€‰æ‹©æœºåœº

IP-CIDR,91.108.4.0/22,âœˆï¸ é€‰æ‹©æœºåœº,no-resolve
IP-CIDR,91.108.8.0/21,âœˆï¸ é€‰æ‹©æœºåœº,no-resolve
IP-CIDR,91.108.16.0/22,âœˆï¸ é€‰æ‹©æœºåœº,no-resolve
IP-CIDR,91.108.56.0/22,âœˆï¸ é€‰æ‹©æœºåœº,no-resolve
IP-CIDR,149.154.160.0/20,âœˆï¸ é€‰æ‹©æœºåœº,no-resolve
IP-CIDR6,2001:67c:4e8::/48,âœˆï¸ é€‰æ‹©æœºåœº,no-resolve
IP-CIDR6,2001:b28:f23d::/48,âœˆï¸ é€‰æ‹©æœºåœº,no-resolve
IP-CIDR6,2001:b28:f23f::/48,âœˆï¸ é€‰æ‹©æœºåœº,no-resolve

# Google ä¸­å›½æœåŠ¡
DOMAIN-SUFFIX,services.googleapis.cn,âœˆï¸ é€‰æ‹©æœºåœº
DOMAIN-SUFFIX,xn--ngstr-lra8j.com,âœˆï¸ é€‰æ‹©æœºåœº

# Google ä¸­å›½æœåŠ¡ services.googleapis.cn
IP-CIDR,120.232.181.162/32,âœˆï¸ é€‰æ‹©æœºåœº,no-resolve
IP-CIDR,120.241.147.226/32,âœˆï¸ é€‰æ‹©æœºåœº,no-resolve
IP-CIDR,120.253.253.226/32,âœˆï¸ é€‰æ‹©æœºåœº,no-resolve
IP-CIDR,120.253.255.162/32,âœˆï¸ é€‰æ‹©æœºåœº,no-resolve
IP-CIDR,120.253.255.34/32,âœˆï¸ é€‰æ‹©æœºåœº,no-resolve
IP-CIDR,120.253.255.98/32,âœˆï¸ é€‰æ‹©æœºåœº,no-resolve
IP-CIDR,180.163.150.162/32,âœˆï¸ é€‰æ‹©æœºåœº,no-resolve
IP-CIDR,180.163.150.34/32,âœˆï¸ é€‰æ‹©æœºåœº,no-resolve
IP-CIDR,180.163.151.162/32,âœˆï¸ é€‰æ‹©æœºåœº,no-resolve
IP-CIDR,180.163.151.34/32,âœˆï¸ é€‰æ‹©æœºåœº,no-resolve
IP-CIDR,203.208.39.0/24,âœˆï¸ é€‰æ‹©æœºåœº,no-resolve
IP-CIDR,203.208.40.0/24,âœˆï¸ é€‰æ‹©æœºåœº,no-resolve
IP-CIDR,203.208.41.0/24,âœˆï¸ é€‰æ‹©æœºåœº,no-resolve
IP-CIDR,203.208.43.0/24,âœˆï¸ é€‰æ‹©æœºåœº,no-resolve
IP-CIDR,203.208.50.0/24,âœˆï¸ é€‰æ‹©æœºåœº,no-resolve
IP-CIDR,220.181.174.162/32,âœˆï¸ é€‰æ‹©æœºåœº,no-resolve
IP-CIDR,220.181.174.226/32,âœˆï¸ é€‰æ‹©æœºåœº,no-resolve
IP-CIDR,220.181.174.34/32,âœˆï¸ é€‰æ‹©æœºåœº,no-resolve

# å†…ç½‘
RULE-SET,LAN,DIRECT

# æœ€ç»ˆè§„åˆ™
GEOIP,CN,DIRECT
FINAL,âœˆï¸ é€‰æ‹©æœºåœº,dns-failed

[URL Rewrite]
^https?:\/\/(www.)?(g|google)\.cn https://www.google.com 302
^https?:\/\/(ditu|maps).google\.cn https://maps.google.com 302